(this["webpackJsonphardware-order-webapp"]=this["webpackJsonphardware-order-webapp"]||[]).push([[0],{46:function(e,a,t){e.exports=t(60)},48:function(e,a,t){},60:function(e,a,t){"use strict";t.r(a);t(47),t(48);var r=t(0),l=t.n(r),n=t(9),o=t.n(n),c=t(18),s=t(5),i=t(63),m=t(65),d=t(62),u=t(15),E=t(44);const{useAuth:p,authFetch:h,login:g,logout:b}=Object(E.createAuthProvider)({accessTokenKey:"access_token",onUpdateToken:e=>fetch("/auth/refresh",{method:"POST",body:e.refresh_token}).then(e=>e.json())}),w=()=>{const[e,a]=Object(r.useState)([]),[t,n]=Object(r.useState)(!1),{register:o,handleSubmit:c,setValue:s,formState:{errors:E}}=Object(u.a)(),[p,h]=Object(r.useState)(0);Object(r.useEffect)(()=>{g()},[]);const g=()=>{fetch("/hardware/hardware").then(e=>e.json()).then(e=>a(e)).catch(e=>console.error("Error fetching hardwares:",e))},b=()=>n(!1),w=()=>{console.log("Deleting hardware with ID:",p);let e=localStorage.getItem("REACT_TOKEN_AUTH_KEY"),a="";if(e)try{a=JSON.parse(e).access_token}catch(r){return void console.error("Error parsing token:",r)}const t={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}};fetch("/hardware/hardware/".concat(p),t).then(e=>{if(!e.ok)throw new Error("Failed to delete hardware");return e.text()}).then(()=>{console.log("Hardware deleted successfully"),g(),b()}).catch(e=>console.error("Error deleting hardware:",e))};return l.a.createElement("div",{className:"hardwares container",style:{backgroundImage:"url('public/hardwarepic.jpeg')",backgroundSize:"cover",backgroundPosition:"center",height:"100vh"}},l.a.createElement(i.a,{show:t,size:"lg",onHide:b},l.a.createElement(i.a.Header,{closeButton:!0},l.a.createElement(i.a.Title,null,"Update Hardware")),l.a.createElement(i.a.Body,null,l.a.createElement(m.a,null,l.a.createElement(m.a.Group,null,l.a.createElement(m.a.Label,null,"Title"),l.a.createElement(m.a.Control,Object.assign({type:"text",placeholder:"Enter title"},o("title",{required:!0,maxLength:50}))),E.title&&l.a.createElement("p",{style:{color:"red"}},l.a.createElement("small",null,"Title is required"))),l.a.createElement(m.a.Group,null,l.a.createElement(m.a.Label,null,"Destination"),l.a.createElement(m.a.Control,Object.assign({type:"text",placeholder:"Enter destination"},o("destination",{required:!0}))),E.destination&&l.a.createElement("p",{style:{color:"red"}},l.a.createElement("small",null,"Destination is required"))),l.a.createElement(m.a.Group,null,l.a.createElement(m.a.Label,null,"Details"),l.a.createElement(m.a.Control,Object.assign({as:"textarea",rows:5,placeholder:"Enter details"},o("details",{required:!0}))),E.details&&l.a.createElement("p",{style:{color:"red"}},l.a.createElement("small",null,"Details are required"))),l.a.createElement(m.a.Group,null,l.a.createElement(m.a.Label,null,"Date"),l.a.createElement(m.a.Control,Object.assign({type:"date"},o("date",{required:!0}))),E.date&&l.a.createElement("p",{style:{color:"red"}},l.a.createElement("small",null,"Date is required"))),l.a.createElement(d.a,{variant:"primary",onClick:c(e=>{console.log("Updating hardware:",e);let a=localStorage.getItem("REACT_TOKEN_AUTH_KEY"),t="";if(a)try{t=JSON.parse(a).access_token}catch(l){return void console.error("Error parsing token:",l)}const r={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(e)};fetch("/hardware/hardware/".concat(p),r).then(e=>e.ok?e.json():e.text().then(a=>{throw new Error("Error: ".concat(e.status," - ").concat(a))})).then(e=>{console.log("Updated hardware data:",e),g(),b()}).catch(e=>console.error("Error updating hardware:",e))})},"Update Hardware"),l.a.createElement(d.a,{variant:"danger",className:"ms-2",onClick:w},"Delete")))),l.a.createElement("h1",null,"List of Hardwares"),Array.isArray(e)&&e.length>0?e.map(a=>l.a.createElement("hardware",{key:a.id,title:a.title,destination:a.destination,date:a.date,description:a.details,onClick:()=>(a=>{h(a),n(!0);const t=e.find(e=>e.id===a);t&&(s("title",t.title),s("destination",t.destination),s("details",t.details),s("date",t.date))})(a.id),onDelete:()=>w(a.id)})):l.a.createElement("p",null,"No hardwares available."))},y=()=>l.a.createElement("div",{className:"home container",style:{backgroundImage:"url('/public/hardwarepic.jpeg')",backgroundSize:"cover",backgroundPosition:"center",height:"100vh"}},l.a.createElement("h1",null,"Welcome to Hardware Management Page"),l.a.createElement("p",null,"Sign in to view your hardwares or Sign Up to start managing"),l.a.createElement(c.b,{to:"/signup",className:"btn btn-primary"},"Get Started"));var f=()=>{const[e]=p();return l.a.createElement("div",null,e?l.a.createElement(w,null):l.a.createElement(y,null))};var O=()=>{var e,a;const{register:t,handleSubmit:r,reset:n,formState:{errors:o}}=Object(u.a)(),i=Object(s.p)();return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"form"},l.a.createElement("h1",null,"Login Page"),l.a.createElement("form",null,l.a.createElement(m.a.Group,null,l.a.createElement(m.a.Label,null,"Username"),l.a.createElement(m.a.Control,Object.assign({type:"text",placeholder:"Your username"},t("username",{required:!0,maxLength:25})))),o.username&&l.a.createElement("p",{style:{color:"red"}},l.a.createElement("small",null,"Username is required")),"maxLength"===(null===(e=o.username)||void 0===e?void 0:e.type)&&l.a.createElement("p",{style:{color:"red"}},l.a.createElement("small",null,"Username should be 25 characters")),l.a.createElement("br",null),l.a.createElement(m.a.Group,null,l.a.createElement(m.a.Label,null,"Password"),l.a.createElement(m.a.Control,Object.assign({type:"password",placeholder:"Your password"},t("password",{required:!0,minLength:8})))),o.password&&l.a.createElement("p",{style:{color:"red"}},l.a.createElement("small",null,"Password is required")),"minLength"===(null===(a=o.password)||void 0===a?void 0:a.type)&&l.a.createElement("p",{style:{color:"red"}},l.a.createElement("small",null,"Password should be more than 8 characters")),l.a.createElement("br",null),l.a.createElement(m.a.Group,null,l.a.createElement(d.a,{variant:"primary",type:"submit",onClick:r(e=>{const a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};fetch("/auth/login",a).then(e=>{if(!e.ok)throw new Error("Login failed");return e.json()}).then(e=>{e.access_token?(g(e),i("/")):console.error("Access token missing in response")}).catch(e=>console.error("Login error:",e)),n()})},"Login")),l.a.createElement("br",null),l.a.createElement(m.a.Group,null,l.a.createElement("small",null,"Do not have an account? ",l.a.createElement(c.b,{to:"/signup"},"Sign Up"))))))},j=t(64);var v=()=>{const{register:e,handleSubmit:a,reset:t,formState:{errors:n}}=Object(u.a)(),[o,s]=Object(r.useState)(!1),[i,E]=Object(r.useState)(""),p=e=>{if(e.password===e.confirmPassword){const a={username:e.username,email:e.email,password:e.password},r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)};fetch("/auth/signup",r).then(e=>e.json()).then(e=>{E(e.message),console.log(i),console.log(e),s(!0)}).catch(e=>console.error("Error:",e)),t()}else alert("Passwords do not match")};return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"form"},o?l.a.createElement(l.a.Fragment,null,l.a.createElement(j.a,{variant:"success",onClose:()=>s(!1),dismissible:!0},l.a.createElement("p",null,i)),l.a.createElement("h1",null,"Sign Up Page")):l.a.createElement("h1",null,"Sign Up Page"),l.a.createElement("form",{onSubmit:a(p)},l.a.createElement(m.a.Group,null,l.a.createElement(m.a.Label,null,"Username"),l.a.createElement(m.a.Control,Object.assign({type:"text",placeholder:"Your username"},e("username",{required:!0,maxLength:100}))),n.username&&l.a.createElement("p",{style:{color:"red"}},l.a.createElement("small",null,"Username is required"))),l.a.createElement("br",null),l.a.createElement(m.a.Group,null,l.a.createElement(m.a.Label,null,"Email"),l.a.createElement(m.a.Control,Object.assign({type:"email",placeholder:"Your email"},e("email",{required:!0,maxLength:100}))),n.email&&l.a.createElement("p",{style:{color:"red"}},l.a.createElement("small",null,"Email is required"))),l.a.createElement("br",null),l.a.createElement(m.a.Group,null,l.a.createElement(m.a.Label,null,"Password"),l.a.createElement(m.a.Control,Object.assign({type:"password",placeholder:"Create pasword"},e("password",{required:!0,minLength:8}))),n.password&&l.a.createElement("p",{style:{color:"red"}},l.a.createElement("small",null,"Password is required and must be at least 8 characters long"))),l.a.createElement("br",null),l.a.createElement(m.a.Group,null,l.a.createElement(m.a.Label,null,"Confirm Password"),l.a.createElement(m.a.Control,Object.assign({type:"password",placeholder:"Your password"},e("confirmPassword",{required:!0,minLength:8}))),n.confirmPassword&&l.a.createElement("p",{style:{color:"red"}},l.a.createElement("small",null,"Passwords do not match"))),l.a.createElement("br",null),l.a.createElement(m.a.Group,null,l.a.createElement(d.a,{variant:"primary",type:"submit",onClick:a(p)},"Sign Up")),l.a.createElement("br",null),l.a.createElement(m.a.Group,null,l.a.createElement("small",null,"Already have an account? ",l.a.createElement(c.b,{to:"/login"},"Login"))))))};var S=()=>{const{register:e,handleSubmit:a,reset:t,formState:{errors:r}}=Object(u.a)();return l.a.createElement("div",{className:"container"},l.a.createElement("h1",null,"Create a Hardware Item"),l.a.createElement(m.a,{onSubmit:a(e=>{console.log("Form Data:",e);const a=localStorage.getItem("REACT_TOKEN_AUTH_KEY");if(a)try{const r=JSON.parse(a).access_token,l={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(e)};fetch("/hardware/hardware",l).then(e=>e.json()).then(e=>{console.log("Response:",e),t()}).catch(e=>console.error("Error:",e))}catch(r){console.error("Error parsing token:",r)}else console.log("Token not found in local storage")})},l.a.createElement(m.a.Group,{controlId:"title"},l.a.createElement(m.a.Label,null,"Title"),l.a.createElement(m.a.Control,Object.assign({type:"text",placeholder:"Enter title"},e("title",{required:!0,maxLength:50}))),r.title&&l.a.createElement("p",{style:{color:"red"}},l.a.createElement("small",null,"Title is required"))),l.a.createElement(m.a.Group,{controlId:"user_id"},l.a.createElement(m.a.Label,null,"User ID"),l.a.createElement(m.a.Control,Object.assign({type:"number",placeholder:"Enter user ID"},e("user_id",{required:!0}))),r.user_id&&l.a.createElement("p",{style:{color:"red"}},l.a.createElement("small",null,"User ID is required"))),l.a.createElement(m.a.Group,{controlId:"destination"},l.a.createElement(m.a.Label,null,"Destination"),l.a.createElement(m.a.Control,Object.assign({type:"text",placeholder:"Enter destination"},e("destination",{required:!0}))),r.destination&&l.a.createElement("p",{style:{color:"red"}},l.a.createElement("small",null,"Destination is required"))),l.a.createElement(m.a.Group,{controlId:"details"},l.a.createElement(m.a.Label,null,"Details"),l.a.createElement(m.a.Control,Object.assign({as:"textarea",rows:5,placeholder:"Enter details"},e("details",{required:!0}))),r.details&&l.a.createElement("p",{style:{color:"red"}},l.a.createElement("small",null,"Details are required"))),l.a.createElement(m.a.Group,{controlId:"date"},l.a.createElement(m.a.Label,null,"Date"),l.a.createElement(m.a.Control,Object.assign({type:"date"},e("date",{required:!0}))),r.date&&l.a.createElement("p",{style:{color:"red"}},l.a.createElement("small",null,"Date is required"))),l.a.createElement(d.a,{variant:"primary",type:"submit"},"Save")))},C=t(66);var k=e=>{let{title:a,userId:t,date:r,details:n,onClick:o,onDelete:c}=e;return l.a.createElement(C.a,{className:"hardware-item",onClick:o},l.a.createElement(C.a.Body,null,l.a.createElement(C.a.Title,null,a),l.a.createElement(C.a.Subtitle,{className:"mb-2 text-muted"},"User ID: ",t),l.a.createElement(C.a.Text,null,l.a.createElement("strong",null,"Date Acquired:")," ",r),l.a.createElement(C.a.Text,null,n),l.a.createElement(d.a,{variant:"primary",onClick:o},"Update"),l.a.createElement(d.a,{variant:"danger",onClick:c},"Delete")))};const L=()=>l.a.createElement(c.a,null,l.a.createElement("div",{className:"container"},l.a.createElement(s.c,null,l.a.createElement(s.a,{path:"/",element:l.a.createElement(f,null)}),l.a.createElement(s.a,{path:"/home",element:l.a.createElement(f,null)}),l.a.createElement(s.a,{path:"/login",element:l.a.createElement(O,null)}),l.a.createElement(s.a,{path:"/signup",element:l.a.createElement(v,null)}),l.a.createElement(s.a,{path:"/createhardware",element:l.a.createElement(S,null)}),l.a.createElement(s.a,{path:"/hardware",element:l.a.createElement(k,null)}))));o.a.createRoot(l.a.createElement(L,null),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.21a0b2b1.chunk.js.map